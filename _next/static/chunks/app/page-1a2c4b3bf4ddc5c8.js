(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4035:function(e,t,n){Promise.resolve().then(n.bind(n,205)),Promise.resolve().then(n.bind(n,7896)),Promise.resolve().then(n.bind(n,5248))},205:function(e,t,n){"use strict";n.d(t,{CopyButton:function(){return u}});var l=n(7437),r=n(2265),s=n(5293),i=n(535),o=n(4508);let a=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:n,variant:r,size:i,asChild:d=!1,...u}=e,c=d?s.g7:"button";return(0,l.jsx)(c,{className:(0,o.cn)(a({variant:r,size:i,className:n})),ref:t,...u})});function u(e){let{value:t,label:n="Copy",className:s,variant:i="outline",size:a="sm"}=e,[u,c]=r.useState(!1),m=async()=>{try{var e,n;if(null===(n=navigator)||void 0===n?void 0:null===(e=n.clipboard)||void 0===e?void 0:e.writeText)await navigator.clipboard.writeText(t);else{let e=document.createElement("textarea");e.value=t,e.setAttribute("readonly","true"),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}c(!0),window.setTimeout(()=>c(!1),2e3)}catch(e){c(!1)}};return(0,l.jsx)(d,{type:"button",size:a,variant:i,onClick:m,className:(0,o.cn)("shrink-0",s),"aria-label":"Copy ".concat(n.toLowerCase()),children:u?"Copied":n})}d.displayName="Button"},7896:function(e,t,n){"use strict";n.d(t,{ServiceStatus:function(){return d}});var l=n(7437),r=n(2265),s=n(5974),i=n(4508);let o={checking:"Checking",online:"Online",offline:"Offline"},a={checking:"border-muted text-muted-foreground",online:"border-emerald-500/40 text-emerald-600 dark:text-emerald-400",offline:"border-rose-500/40 text-rose-600 dark:text-rose-400"};function d(e){let{url:t,pingUrl:n,timeoutMs:d=2500}=e,[u,c]=r.useState("checking"),m=r.useMemo(()=>null!=n?n:t,[n,t]);return r.useEffect(()=>{let e=!0,t=new AbortController,n=window.setTimeout(()=>t.abort(),d);return fetch(m,{method:"GET",mode:"no-cors",cache:"no-store",signal:t.signal}).then(()=>{e&&c("online")}).catch(()=>{e&&c("offline")}).finally(()=>{clearTimeout(n)}),()=>{e=!1,clearTimeout(n),t.abort()}},[m,d]),(0,l.jsx)(s.C,{variant:"outline",className:(0,i.cn)(a[u]),children:o[u]})}},5248:function(e,t,n){"use strict";n.d(t,{SystemMetricsCard:function(){return S}});var l=n(7437),r=n(2265),s=n(5974),i=n(4508);let o=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,i.cn)("rounded-xl border border-border bg-card text-card-foreground shadow-sm",n),...r})});o.displayName="Card";let a=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col gap-2 p-6",n),...r})});a.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,l.jsx)("h3",{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",n),...r})});d.displayName="CardTitle";let u=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,l.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n),...r})});u.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",n),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",n),...r})}).displayName="CardFooter";let m={loading:"Checking",online:"Online",offline:"Offline"},f={loading:"border-muted text-muted-foreground",online:"border-emerald-500/40 text-emerald-600 dark:text-emerald-400",offline:"border-rose-500/40 text-rose-600 dark:text-rose-400"},x={cpu:{total:null,user:null,system:null,iowait:null},memory:{percent:null,used:null,total:null,available:null},disk:{percent:null,used:null,total:null,mount:null},processes:[],uptimeSeconds:null,updatedAt:null},p={cpu:[],memory:[],disk:[]},v=function(){for(var e,t=arguments.length,n=Array(t),l=0;l<t;l++)n[l]=arguments[l];return null!==(e=n.find(e=>"number"==typeof e&&Number.isFinite(e)))&&void 0!==e?e:null},h=e=>{var t,n,l;let r=e.trim();if(!r)return null;let s=Number(r);if(!Number.isNaN(s)&&Number.isFinite(s))return s;let i=0,o=r.match(/(\d+)\s*day/);o&&(i=Number(o[1]));let a=r.match(/(\d{1,2}):(\d{2})(?::(\d{2}))?/);return a?86400*i+3600*Number(null!==(t=a[1])&&void 0!==t?t:0)+60*Number(null!==(n=a[2])&&void 0!==n?n:0)+Number(null!==(l=a[3])&&void 0!==l?l:0):i>0?86400*i:null},g=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e of t){if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e){let t=h(e);if(null!==t)return t}}return null},y=e=>null===e?null:Math.min(100,Math.max(0,e)),j=e=>null===e?"--":"".concat(Math.round(e),"%"),b=e=>{if(null===e)return"--";if(0===e)return"0 B";let t=["B","KB","MB","GB","TB"],n=0,l=e;for(;l>=1024&&n<t.length-1;)l/=1024,n+=1;return"".concat(l.toFixed(l>=10?0:1)," ").concat(t[n])},N=e=>e?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",second:"2-digit"}).format(e):"--",w=e=>String(e).padStart(2,"0"),k=e=>{if(null===e||!Number.isFinite(e)||e<=0)return"--";let t=Math.floor(e);return"".concat(Math.floor(t/86400),":").concat(w(Math.floor(t%86400/3600)),":").concat(w(Math.floor(t%3600/60)),":").concat(w(t%60))};async function C(e){let t=await fetch("".concat("/api/metrics","/").concat(e),{cache:"no-store"});if(!t.ok)throw Error("Failed to load ".concat(e));return t.json()}function _(e){let{data:t,strokeClassName:n,fillClassName:r}=e,s=t.length>1?t:1===t.length?[t[0],t[0]]:[0,0],o=s.map((e,t)=>{let n=22+t/(s.length-1)*112;return"".concat(n.toFixed(2),",").concat((48-Math.min(100,Math.max(0,e))/100*42).toFixed(2))}).join(" "),a="".concat(22,",").concat(48," ").concat(o," ").concat(134,",").concat(48);return(0,l.jsxs)("svg",{viewBox:"0 0 ".concat(140," ").concat(54),className:"h-14 w-full",role:"img","aria-hidden":"true",children:[(0,l.jsxs)("g",{className:"stroke-muted-foreground/20",children:[(0,l.jsx)("line",{x1:22,y1:6,x2:134,y2:6}),(0,l.jsx)("line",{x1:22,y1:27,x2:134,y2:27})]}),(0,l.jsxs)("g",{className:"stroke-muted-foreground/40",children:[(0,l.jsx)("line",{x1:22,y1:6,x2:22,y2:48}),(0,l.jsx)("line",{x1:22,y1:48,x2:134,y2:48})]}),(0,l.jsxs)("g",{className:"fill-muted-foreground text-[8px]",children:[(0,l.jsx)("text",{x:19,y:6,textAnchor:"end",dominantBaseline:"middle",children:"100"}),(0,l.jsx)("text",{x:19,y:27,textAnchor:"end",dominantBaseline:"middle",children:"50"}),(0,l.jsx)("text",{x:19,y:48,textAnchor:"end",dominantBaseline:"middle",children:"0"})]}),(0,l.jsx)("polygon",{className:(0,i.cn)("opacity-25",r),points:a}),(0,l.jsx)("polyline",{className:(0,i.cn)("fill-none stroke-[2]",n),points:o,strokeLinecap:"round",strokeLinejoin:"round"})]})}function A(e){let{label:t,value:n,detail:r,data:s,stroke:i,fill:o,children:a}=e;return(0,l.jsxs)("div",{className:"rounded-lg border border-border/60 bg-muted/30 p-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-[10px] uppercase tracking-[0.2em] text-muted-foreground",children:t}),(0,l.jsx)("span",{className:"text-sm font-semibold text-foreground",children:n})]}),r?(0,l.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:r}):null,(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(_,{data:s,strokeClassName:i,fillClassName:o})}),(0,l.jsx)("div",{className:"mt-2 grid gap-1 text-xs text-muted-foreground",children:a})]})}function S(){var e;let[t,n]=r.useState("loading"),[h,w]=r.useState(x),[_,S]=r.useState(p);r.useEffect(()=>{let e=!0,t=async()=>{var t,l,r,s;let i=await Promise.allSettled([C("cpu"),C("mem"),C("fs"),C("processlist"),C("uptime")]);if(!e)return;let o="fulfilled"===i[0].status?i[0].value:null,a="fulfilled"===i[1].status?i[1].value:null,d="fulfilled"===i[2].status?i[2].value:null,u="fulfilled"===i[3].status?i[3].value:null,c="fulfilled"===i[4].status?i[4].value:null,m=y(v(null==o?void 0:o.total,null==o?void 0:o.cpu_percent,null==o?void 0:o.total_percent)),f=y(v(null==o?void 0:o.user,null==o?void 0:o.user_percent)),x=y(v(null==o?void 0:o.system,null==o?void 0:o.system_percent)),p=y(v(null==o?void 0:o.iowait,null==o?void 0:o.iowait_percent)),h=y(v(null==a?void 0:a.percent,null==a?void 0:a.used_percent,null==a?void 0:a.mem_percent)),j=v(null==a?void 0:a.used,null==a?void 0:a.used_memory),b=v(null==a?void 0:a.total,null==a?void 0:a.total_memory),N=v(null==a?void 0:a.available,null==a?void 0:a.available_memory),k=Array.isArray(d)?d:null==d?void 0:d.filesystems,_=Array.isArray(k)?null!==(t=k.find(e=>(null==e?void 0:e.mnt_point)==="/"||(null==e?void 0:e.mountpoint)==="/"))&&void 0!==t?t:k[0]:null,A=y(v(null==_?void 0:_.percent,null==_?void 0:_.used_percent)),M=v(null==_?void 0:_.used,null==_?void 0:_.used_bytes),T=v(null==_?void 0:_.size,null==_?void 0:_.total,null==_?void 0:_.total_bytes),B=null!==(s=null!==(r=null!==(l=null==_?void 0:_.mnt_point)&&void 0!==l?l:null==_?void 0:_.mountpoint)&&void 0!==r?r:null==_?void 0:_.device_name)&&void 0!==s?s:null,F=Array.isArray(u)?u:null==u?void 0:u.processlist,R=[...Array.isArray(F)?F.map(e=>{var t,n,l,r,s;return{pid:null!==(t=null==e?void 0:e.pid)&&void 0!==t?t:null==e?void 0:e.PID,name:null!==(r=null!==(l=null!==(n=null==e?void 0:e.name)&&void 0!==n?n:null==e?void 0:e.command)&&void 0!==l?l:null==e?void 0:e.cmdline)&&void 0!==r?r:"unknown",cpu:y(v(null==e?void 0:e.cpu_percent,null==e?void 0:e.cpu)),memory:y(v(null==e?void 0:e.memory_percent,null==e?void 0:e.mem_percent,null==e?void 0:e.mem)),command:null!==(s=null==e?void 0:e.cmdline)&&void 0!==s?s:null==e?void 0:e.command}}).filter(e=>e.name):[]].sort((e,t)=>{var n,l,r,s;let i=(null!==(n=t.cpu)&&void 0!==n?n:0)-(null!==(l=e.cpu)&&void 0!==l?l:0);return 0!==i?i:(null!==(r=t.memory)&&void 0!==r?r:0)-(null!==(s=e.memory)&&void 0!==s?s:0)}).slice(0,4);n(o||a||d||u||c?"online":"offline");let E=g(c,null==c?void 0:c.uptime,null==c?void 0:c.uptime_sec,null==c?void 0:c.uptime_seconds,null==c?void 0:c.seconds,null==c?void 0:c.value);w({cpu:{total:m,user:f,system:x,iowait:p},memory:{percent:h,used:j,total:b,available:N},disk:{percent:A,used:M,total:T,mount:B},processes:R,uptimeSeconds:null!=E?E:null,updatedAt:new Date}),S(e=>({cpu:null!==m?[...e.cpu,m].slice(-24):e.cpu,memory:null!==h?[...e.memory,h].slice(-24):e.memory,disk:null!==A?[...e.disk,A].slice(-24):e.disk}))};t();let l=window.setInterval(t,1e3);return()=>{e=!1,window.clearInterval(l)}},[]);let M=null!==h.memory.used&&null!==h.memory.total?"".concat(b(h.memory.used)," / ").concat(b(h.memory.total)):"Usage data pending",T=null!==h.disk.used&&null!==h.disk.total?"".concat(b(h.disk.used)," / ").concat(b(h.disk.total)):"Usage data pending";return(0,l.jsxs)(o,{children:[(0,l.jsxs)(a,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(d,{children:"System metrics"}),(0,l.jsx)(s.C,{variant:"outline",className:(0,i.cn)(f[t]),children:m[t]})]}),(0,l.jsx)(u,{children:"Live CPU, memory, disk, and process telemetry"})]}),(0,l.jsxs)(c,{className:"grid gap-4 text-sm text-muted-foreground",children:[(0,l.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,l.jsxs)(A,{label:"CPU load",value:j(h.cpu.total),detail:"Aggregate utilization",data:_.cpu,stroke:"stroke-emerald-500",fill:"fill-emerald-500",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"User"}),(0,l.jsx)("span",{className:"text-foreground",children:j(h.cpu.user)})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"System"}),(0,l.jsx)("span",{className:"text-foreground",children:j(h.cpu.system)})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"I/O wait"}),(0,l.jsx)("span",{className:"text-foreground",children:j(h.cpu.iowait)})]})]}),(0,l.jsxs)(A,{label:"Memory usage",value:j(h.memory.percent),detail:M,data:_.memory,stroke:"stroke-sky-500",fill:"fill-sky-500",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"Available"}),(0,l.jsx)("span",{className:"text-foreground",children:b(h.memory.available)})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"Total"}),(0,l.jsx)("span",{className:"text-foreground",children:b(h.memory.total)})]})]}),(0,l.jsxs)(A,{label:"Storage usage",value:j(h.disk.percent),detail:T,data:_.disk,stroke:"stroke-amber-500",fill:"fill-amber-500",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"Mount"}),(0,l.jsx)("span",{className:"text-foreground",children:null!==(e=h.disk.mount)&&void 0!==e?e:"--"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"Total"}),(0,l.jsx)("span",{className:"text-foreground",children:b(h.disk.total)})]})]}),(0,l.jsxs)("div",{className:"rounded-lg border border-border/60 bg-muted/30 p-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-[10px] uppercase tracking-[0.2em] text-muted-foreground",children:"Top processes"}),(0,l.jsx)("span",{className:"text-xs text-muted-foreground",children:h.processes.length?"".concat(h.processes.length," shown"):"No data"})]}),(0,l.jsx)("div",{className:"mt-2 grid gap-2 text-xs text-muted-foreground",children:h.processes.length?h.processes.map(e=>{var t,n,r;return(0,l.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-foreground",children:e.name}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:["PID ",null!==(t=e.pid)&&void 0!==t?t:"--"]})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("p",{className:"text-sm text-foreground",children:j(null!==(n=e.cpu)&&void 0!==n?n:null)}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:[j(null!==(r=e.memory)&&void 0!==r?r:null)," RAM"]})]})]},"".concat(e.name,"-").concat(e.pid))}):(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Waiting for process data."})})]})]}),(0,l.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs",children:[(0,l.jsxs)("span",{children:["Uptime: ",k(h.uptimeSeconds)]}),(0,l.jsxs)("span",{children:["Last sync: ",N(h.updatedAt)]}),(0,l.jsxs)("span",{children:["Refreshes every ",1,"s"]})]})]})]})}},5974:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var l=n(7437);n(2265);var r=n(535),s=n(4508);let i=(0,r.j)("inline-flex items-center rounded-full border border-transparent px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"bg-primary text-primary-foreground",secondary:"bg-secondary text-secondary-foreground",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:n,...r}=e;return(0,l.jsx)("div",{className:(0,s.cn)(i({variant:n}),t),...r})}},4508:function(e,t,n){"use strict";n.d(t,{cn:function(){return s}});var l=n(1994),r=n(3335);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.m6)((0,l.W)(t))}}},function(e){e.O(0,[50,971,117,744],function(){return e(e.s=4035)}),_N_E=e.O()}]);